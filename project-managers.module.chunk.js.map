{"version":3,"sources":["./src/app/ffufm-feedback-dashboard-features/project-managers/project-managers.component.css","./src/app/ffufm-feedback-dashboard-features/project-managers/project-managers.component.html","./src/app/ffufm-feedback-dashboard-features/project-managers/project-managers.component.ts","./src/app/ffufm-feedback-dashboard-features/project-managers/project-managers.module.ts","./src/app/ffufm-feedback-dashboard-features/project-managers/project-managers.routing.ts"],"names":[],"mappings":"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","file":"project-managers.module.chunk.js","sourcesContent":["module.exports = \"* {\\n    text-align: center;\\n}\\n\\n.results .right-panel {\\n    display: inline-block;\\n    width: 69%;\\n}\\n\\n.results .left-panel {\\n    display: inline-block;\\n    width: 30%;\\n}\\n\\n.chart-container {\\n    height: 80vh;\\n    width: 45vw\\n}\\n\\n.chip > label {\\n  background-color: #7f7e80;\\n  border-radius: 5px;\\n  padding: 5px;\\n  color: #ffffff;\\n}\\n\\n.chip > label > span {\\n  color: white;\\n}\\n\\n.chip > label:hover{\\n  background-color: #979194;\\n}\\n\\n.results {\\n  height: 50vh;\\n  width: 70vw;\\n}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/ffufm-feedback-dashboard-features/project-managers/project-managers.component.css\n// module id = ./src/app/ffufm-feedback-dashboard-features/project-managers/project-managers.component.css\n// module chunks = project-managers.module","module.exports = \"<!--project-managers works!-->\\n\\n<!--<div class=\\\"results container\\\">-->\\n  <div class=\\\"form-inline\\\">\\n    search for pm: <input type=\\\"text\\\" class=\\\"form-control\\\" [(ngModel)]=\\\"query\\\"\\n                          (input)=\\\"loadProjectManagers()\\\"><br/> <br/>\\n    <div *ngFor=\\\"let pm of projectManagers\\\" style=\\\"display: inline\\\">\\n      <!--<div *ngIf=\\\"pm.hide == true\\\">-->\\n      <!--(click)=\\\"filterProjectManagers(pm.id) style=\\\"background-color: {{ pm.color }}\\\"-->\\n      <a href=\\\"#/project-managers/{{ pm.id }}/\\\">\\n        <span class=\\\"chip\\\">\\n          <label>{{ pm.displayName }} <{{ pm.id }}>\\n          </label>\\n        </span>\\n        <!--<button class=\\\"btn\\\" (click)=\\\"filterProjectManagers(pm.id)\\\">{{ pm.displayName }} <{{ pm.id }}>-->\\n        <!--</button>-->\\n      </a>\\n      <!--</div>-->\\n      <!--<div *ngIf=\\\"pm.hide == false\\\">-->\\n      <!--<button class=\\\"btn btn-info\\\" (click)=\\\"filterProjectManagers(pm.id)\\\">{{-->\\n      <!--pm.displayName }} <{{ pm.id }}>-->\\n      <!--</button>-->\\n      <!--</div>-->\\n\\n    </div>\\n  </div>\\n  <div>\\n    <h4>Total billable days: {{ totalBillableDays }}</h4>\\n    <div class=\\\"results container\\\">\\n      <!--<div class=\\\"chart-container\\\">-->\\n      <!--(click)=\\\"select($event)\\\"-->\\n      <!--(select)=\\\"selectt($event)\\\"-->\\n      <ngx-charts-bar-vertical [results]=\\\"billableDaysByProjectManager\\\"\\n                               [legend]=\\\"showLegend\\\"\\n      ></ngx-charts-bar-vertical>\\n    </div>\\n    <!--</div>-->\\n  </div>\\n<!--</div>-->\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/ffufm-feedback-dashboard-features/project-managers/project-managers.component.html\n// module id = ./src/app/ffufm-feedback-dashboard-features/project-managers/project-managers.component.html\n// module chunks = project-managers.module","import { Answer } from '@app/shared/models/answer.model';\nimport { Component, OnInit } from '@angular/core';\nimport { Project } from '@app/shared/models/project.model';\nimport { ProjectStore, UserStore } from '@app/core/stores';\nimport { Question } from '@app/shared/models/question.model';\nimport { User } from '@app/shared/models/user.model';\nimport * as _ from 'lodash';\n\n@Component({\n  selector: 'ffufm-feedback-dashboard-project-managers',\n  templateUrl: './project-managers.component.html',\n  styleUrls: ['./project-managers.component.css']\n})\nexport class ProjectManagersComponent implements OnInit {\n\n  showLegend = 'true';\n  query: string = '';\n  queryResults: any[];\n  projects: Project[];\n  projectManagers: any[];\n  users: any[];\n  answers: Answer[];\n  questions: Question[];\n  billableDaysByProjectManager: any[];\n  projectsByProjectManager: {};\n  totalBillableDays: number = 0;\n\n  constructor(private projectStore: ProjectStore,\n              private userStore: UserStore) { }\n\n  ngOnInit() {\n    this.getProjects();\n    this.getUsers();\n    this.loadProjectManagers();\n  }\n\n  loadBillableDaysByProjectManager() {\n    this.billableDaysByProjectManager = [];\n    this.projectsByProjectManager = _.mapValues(_.groupBy(this.projects, 'projectManagerId'),\n      clist => clist.map(team => _.omit(team, 'projectManagerId')));\n\n    Object.keys(this.projectsByProjectManager).forEach((key) => {\n      let accumulatedBillableDays = 0;\n      this.projectsByProjectManager[key].forEach((project) => {\n        accumulatedBillableDays += Number(project.billableDays);\n      });\n\n      this.projectManagers.forEach((pm) => {\n          if (pm.id == key) {\n            if (pm.hide == false) {\n              this.billableDaysByProjectManager.push({\n                'name': pm.displayName + ' <' + pm.id + '>',\n                'value': accumulatedBillableDays\n              });\n            }\n          }\n        }\n      );\n      this.totalBillableDays = Number(accumulatedBillableDays) + this.totalBillableDays;\n    });\n\n  }\n\n  getProjects() {\n    this.projectStore.getProjects()\n        .subscribe((projects: Project[]) => {\n          this.projects = projects;\n        });\n  }\n\n  filterProjectManagers(projectManagerId) {\n    this.projectManagers.forEach((result) => {\n      if (result.id === projectManagerId) {\n        if (result.hide == false) {\n          result.hide = true;\n        } else {\n          result.hide = false;\n        }\n      }\n    });\n\n    this.loadBillableDaysByProjectManager();\n  }\n\n  loadProjectManagers() {\n    this.projectManagers = this.projects.reduce((acc, project: Project) => {\n      const {projectManagerId} = project;\n      if (_.findIndex(acc, {id: projectManagerId}) === -1 && projectManagerId !== null) {\n        const user = _.find(this.users, {id: projectManagerId});\n        if (user.displayName.toLowerCase().includes(this.query.toLowerCase())) {\n          user.hide = false;\n          acc.push(user);\n        }\n\n      }\n      return acc;\n    }, []);\n\n    this.loadBillableDaysByProjectManager();\n  }\n\n  sortResults() {\n    this.projectManagers = _.sortBy(this.projectManagers, (user: User) => { return user.displayName });\n  }\n\n  private getUsers() {\n    this.userStore.getUsers()\n        .subscribe((users: User[]) => {\n          this.users = _.map(users, (user: User) => {\n            return user;\n          });\n          this.users = _.orderBy(this.users, 'displayName', 'asc');\n        });\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/ffufm-feedback-dashboard-features/project-managers/project-managers.component.ts","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { SharedModule } from '@app/shared';\nimport { ProjectManagersComponent } from '@app/ffufm-feedback-dashboard-features/project-managers/project-managers.component';\nimport { ProjectManagersRouting } from '@app/ffufm-feedback-dashboard-features/project-managers/project-managers.routing';\nimport { FormsModule } from '@angular/forms';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    SharedModule,\n    ProjectManagersRouting,\n    FormsModule\n  ],\n  declarations: [\n    ProjectManagersComponent\n  ]\n})\nexport class ProjectManagersModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/ffufm-feedback-dashboard-features/project-managers/project-managers.module.ts","import { RouterModule, Routes } from '@angular/router';\nimport { NgModule } from '@angular/core';\nimport { ProjectManagersComponent } from '@app/ffufm-feedback-dashboard-features/project-managers/project-managers.component';\n\nconst projectManagersRoutes: Routes = [\n  {\n    path: '',\n    component: ProjectManagersComponent\n  }\n];\n\n@NgModule({\n  declarations: [],\n  imports: [\n    RouterModule.forChild(projectManagersRoutes)\n  ],\n  exports: [RouterModule]\n})\n\nexport class ProjectManagersRouting {}\n\n\n// WEBPACK FOOTER //\n// ./src/app/ffufm-feedback-dashboard-features/project-managers/project-managers.routing.ts"],"sourceRoot":"webpack:///"}