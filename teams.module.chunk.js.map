{"version":3,"sources":["./src/app/ffufm-feedback-dashboard-features/teams/teams.component.css","./src/app/ffufm-feedback-dashboard-features/teams/teams.component.html","./src/app/ffufm-feedback-dashboard-features/teams/teams.component.ts","./src/app/ffufm-feedback-dashboard-features/teams/teams.module.ts","./src/app/ffufm-feedback-dashboard-features/teams/teams.routing.ts"],"names":[],"mappings":"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","file":"teams.module.chunk.js","sourcesContent":["module.exports = \"* {\\n  text-align: center;\\n}\\n.results {\\n  height: 50vh;\\n  width: 70vw;\\n}\\n.chip > label {\\n  background-color: #7f7e80;\\n  border-radius: 5px;\\n  padding: 5px;\\n  color: #ffffff;\\n}\\n.chip > label > span {\\n  color: white;\\n}\\n.chip > label:hover{\\n  background-color: #979194;\\n}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/ffufm-feedback-dashboard-features/teams/teams.component.css\n// module id = ./src/app/ffufm-feedback-dashboard-features/teams/teams.component.css\n// module chunks = teams.module","module.exports = \"<!--teams component-->\\n\\n<div class=\\\"container\\\">\\n  <div class=\\\"form-inline\\\">\\n    search for teams: <input type=\\\"text\\\" class=\\\"form-control\\\" [(ngModel)]=\\\"query\\\" (input)=\\\"loadTeams()\\\"><br/><br/>\\n    <div *ngFor=\\\"let team of teams\\\" style=\\\"display:inline\\\">\\n      <a href=\\\"#/teams/{{ team.id }}/\\\">\\n        <span class=\\\"chip\\\">\\n          <label>Team {{ team.displayName }} <{{ team.id }}>\\n          </label>\\n        </span>\\n      </a>\\n    </div>\\n  </div>\\n  <!--<div>-->\\n  <h4>Total billable days: {{ totalBillableDays }}</h4>\\n    <div class=\\\"results container\\\">\\n      <!--<div class=\\\"results\\\">-->\\n      <ngx-charts-bar-vertical [results]=\\\"billableDaysByTeam\\\"\\n                               [legend]=\\\"showLegend\\\"></ngx-charts-bar-vertical>\\n      <!--</div>-->\\n    </div>\\n  <!--</div>-->\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/ffufm-feedback-dashboard-features/teams/teams.component.html\n// module id = ./src/app/ffufm-feedback-dashboard-features/teams/teams.component.html\n// module chunks = teams.module","import { Answer } from '@app/shared/models/answer.model';\nimport { Component, OnInit } from '@angular/core';\nimport { Project } from '@app/shared/models/project.model';\nimport { ProjectStore, UserStore } from '@app/core/stores';\nimport { Question } from '@app/shared/models/question.model';\nimport { User } from '@app/shared/models/user.model';\nimport * as _ from 'lodash';\n\n@Component({\n  selector: 'ffufm-feedback-dashboard-teams',\n  templateUrl: './teams.component.html',\n  styleUrls: ['./teams.component.css']\n})\nexport class TeamsComponent implements OnInit {\n\n  showLegend = 'true';\n  query: string = '';\n  queryResults: any[];\n  projects: Project[];\n  teams: User[];\n  users: User[];\n  answers: Answer[];\n  questions: Question[];\n  billableDaysByTeam: any[];\n  projectsByTeam: {};\n  totalBillableDays: number = 0;\n\n  constructor(private projectStore: ProjectStore,\n              private userStore: UserStore) { }\n\n  ngOnInit() {\n    this.getProjects();\n    this.getUsers();\n    this.loadTeams();\n    this.getUsers();\n  }\n\n  loadBillableDaysByTeam() {\n    this.billableDaysByTeam = [];\n    this.projectsByTeam = _.mapValues(_.groupBy(this.projects, 'teamLeadId'),\n      clist => clist.map(team => _.omit(team, 'teamLeadId')));\n\n    Object.keys(this.projectsByTeam).forEach((key) => {\n      let accumulatedBillableDays = 0;\n      this.projectsByTeam[key].forEach((project) => {\n        accumulatedBillableDays += Number(project.billableDays);\n      });\n\n      this.teams.forEach((team) => {\n          if (team.id == key) {\n            this.billableDaysByTeam.push({\n              'name': 'Team ' + team.displayName,\n              'value': accumulatedBillableDays\n            });\n          }\n        }\n      );\n      // console.log(accumulatedBillableDays);\n      this.totalBillableDays = Number(accumulatedBillableDays) + this.totalBillableDays;\n    });\n  }\n\n  getProjects() {\n    this.projectStore.getProjects()\n        .subscribe((projects: Project[]) => {\n          this.projects = projects;\n        });\n  }\n\n  loadTeams() {\n    this.teams = this.projects.reduce((acc, project: Project) => {\n      const {teamLeadId} = project;\n      if (_.findIndex(acc, {id: teamLeadId}) === -1 && teamLeadId !== null) {\n        const user = _.find(this.users, {id: teamLeadId});\n        if (user.displayName.toLowerCase().includes(this.query.toLowerCase())) {\n          acc.push(user);\n        }\n\n      }\n      return acc;\n    }, []);\n    this.queryResults = this.teams;\n    this.queryResults = _.sortBy(this.queryResults, (user: User) => { return user });\n\n    this.loadBillableDaysByTeam();\n  }\n\n  private getUsers() {\n    this.userStore.getUsers()\n        .subscribe((users: User[]) => {\n          this.users = _.map(users, (user: User) => {\n            return user;\n          });\n          this.users = _.orderBy(this.users, 'displayName', 'asc');\n        });\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/ffufm-feedback-dashboard-features/teams/teams.component.ts","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { TeamsComponent } from '@app/ffufm-feedback-dashboard-features/teams/teams.component';\nimport { SharedModule } from '@app/shared';\nimport { TeamsRouting } from '@app/ffufm-feedback-dashboard-features/teams/teams.routing';\nimport { FormsModule } from '@angular/forms';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    SharedModule,\n    TeamsRouting,\n    FormsModule\n  ],\n  declarations: [\n    TeamsComponent\n  ]\n})\nexport class TeamsModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/ffufm-feedback-dashboard-features/teams/teams.module.ts","import { RouterModule, Routes } from '@angular/router';\nimport { NgModule } from '@angular/core';\nimport { TeamsComponent } from '@app/ffufm-feedback-dashboard-features/teams/teams.component';\n\nconst teamsRoutes: Routes = [\n  {\n    path: '',\n    component: TeamsComponent\n  }\n];\n\n@NgModule({\n  declarations: [],\n  imports: [\n    RouterModule.forChild(teamsRoutes)\n  ],\n  exports: [RouterModule]\n})\n\nexport class TeamsRouting {}\n\n\n// WEBPACK FOOTER //\n// ./src/app/ffufm-feedback-dashboard-features/teams/teams.routing.ts"],"sourceRoot":"webpack:///"}